{"version":3,"file":"home.js","mappings":";;;;;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,OAAO;AACP,CAAC;;AAED;AACA;AACA,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,UAAU,QAAQ;AAClB;AACA,aAAa,oCAAoC;AACjD;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,kCAAkC,aAAa,UAAU,aAAa,iBAAiB;AACvF,+BAA+B,UAAU,UAAU,aAAa,iBAAiB;AACjF;;AAEA,EAAE;AACF;AACA;AACA,EAAE;AACF,CAAC;;;AAGD;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;;AAEA;;AAEA,iBAAiB;AACjB;AACA;AACA;;AAEA,UAAU,QAAQ;AAClB;AACA,aAAa,oCAAoC;AACjD;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,kCAAkC,aAAa,UAAU,aAAa,iBAAiB;AACvF,+BAA+B,UAAU,UAAU,aAAa,iBAAiB;AACjF;AACA,EAAE;AACF,CAAC","sources":["webpack://frontend/./src/home.js"],"sourcesContent":["/* \n * Log-In\n */\n\nlogin = document.querySelector(\"#login\")\nlogin.hidden = true\nlogin_button = document.querySelector(\"#login_button\")\nlogin_button.addEventListener(\"click\", (event) =>\n{\n\tif (login.hidden) {login.hidden = false}\n\telse {login.hidden = true}\n})\n\nlogin_captcha = document.querySelector(\"#login_captcha\");\nAPI_URL = \"http://localhost:9000\"\nif (login_captcha !== null) {login_captcha.hidden = true;}\n\nlogin.addEventListener(\"submit\", (event) => \n{\n\tevent.preventDefault();\n\tdata = new FormData(login);\n\tobjectData = { \tusername : data.get('username'),\n\t\t\tpassword: data.get('password'),\n\t\t\trecaptcha: data.get('g-recaptcha-response')}\n\tfetch(`${API_URL}/api/login`, {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify(objectData)\n\t})\n\t.then((response) => {\n\t\tif (response.status == 403) { \n\t\t\tconsole.log(\"Incorrect captcha, or username and password.\")\n\t\t\tcaptcha.hidden = false\n\t\t}\n\t\telse if (response.status == 401) {\n\t\t\tconsole.log(\"Incorrect Username or Password\")\n\t\t\tcaptcha.hidden = true\n\t\t}\n\t\telse if (response.status == 200) {\n\t\t\treturn response.json()\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconsole.log(\"something went wrong\")\n\t\t}})\n\t.then((data) => {\n\t\tconsole.log(data)\n\t\tsession_id = data['session_id']\n\t\texpiry_date = data['expiry_date']\n\t\tuser_id  = data['user_id']\n\t\tdocument.cookie = `session_id=${session_id}; Expires=${expiry_date} SameSite=Strict; Secure`\n\t\tdocument.cookie = `user_id=${user_id}; Expires=${expiry_date} SameSite=Strict; Secure`\n\t\twindow.location.href = \"/monalect\"\n\n\t})\n\t.catch((error)=> {\n\t\tconsole.log(\"ERROR: \", error)\n\t})\n});\n\n\n/*\n * SIGN UP\n */\n\nsignup = document.querySelector(\"#signup\")\nsignup.style.display = \"none\"\nsignup_button = document.querySelector(\"#create\")\narticle = document.querySelector(\"main.home article\") \n\nsignup_button.addEventListener(\"click\", (event) =>\n{\n\tif (signup.display !== \"none\") {\n\t\tarticle.style.display = \"none\"\n\t\tsignup.style.display = \"flex\"\n\t}\n\telse {\n\t\tarticle.style.display = \"flex\"\n\t\tsignup.style.display = \"none\"\n\t}\n})\n\n\nsignup.addEventListener(\"submit\", (event) => \n{\n\tevent.preventDefault();\n\n\tdata = new FormData(signup);\n\n\tobjectData = { \tusername : data.get('username'),\n\t\t\temail: data.get('email'),\n\t\t\tpassword: data.get('password'),\n\t\t\trecaptcha: data.get('g-recaptcha-response')}\n\n\tfetch(`${API_URL}/api/register`, {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify(objectData)\n\t})\n\t.then((response)=>{\n\t\tif (response.status == 403) { \n\t\t\tconsole.log(\"Incorrect captcha, or username and password.\")\n\t\t\tcaptcha.hidden = false\n\t\t}\n\t\telse if (response.status == 401) {\n\t\t\tconsole.log(\"Incorrect Username or Password\")\n\t\t\tcaptcha.hidden = true\n\t\t}\n\t\telse if (response.status == 201) {\n\t\t\treturn response.json()\n\t\t}\n\t\telse {\n\t\t\tconsole.log(\"something went wrong\")\n\t\t}\n\t})\n\t.then((data) => {\n\t\tsession_id = data['session_id']\n\t\texpiry_date = data['expiry_date']\n\t\tuser_id  = data['user_id']\n\t\tdocument.cookie = `session_id=${session_id}; Expires=${expiry_date} SameSite=Strict; Secure`\n\t\tdocument.cookie = `user_id=${user_id}; Expires=${expiry_date} SameSite=Strict; Secure`\n\t\twindow.location.href = \"/monalect\"\n\t})\n});\n"],"names":[],"sourceRoot":""}