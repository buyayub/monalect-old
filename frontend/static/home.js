login=document.querySelector("#login"),login.hidden=!0,login_button=document.querySelector("#login_button"),login_button.addEventListener("click",(e=>{login.hidden?login.hidden=!1:login.hidden=!0})),login_captcha=document.querySelector("#login_captcha"),API_URL="http://localhost:9000",null!==login_captcha&&(login_captcha.hidden=!0),login.addEventListener("submit",(e=>{e.preventDefault(),data=new FormData(login),objectData={username:data.get("username"),password:data.get("password"),recaptcha:data.get("g-recaptcha-response")},fetch(`${API_URL}/api/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(objectData)}).then((e=>{if(403==e.status)console.log("Incorrect captcha, or username and password."),captcha.hidden=!1;else if(401==e.status)console.log("Incorrect Username or Password"),captcha.hidden=!0;else{if(200==e.status)return e.json();console.log("something went wrong")}})).then((e=>{console.log(e),session_id=e.session_id,expiry_date=e.expiry_date,user_id=e.user_id,document.cookie=`session_id=${session_id}; Expires=${expiry_date} SameSite=Strict; Secure`,document.cookie=`user_id=${user_id}; Expires=${expiry_date} SameSite=Strict; Secure`,window.location.href="/monalect"})).catch((e=>{console.log("ERROR: ",e)}))})),signup=document.querySelector("#signup"),signup.style.display="none",signup_button=document.querySelector("#create"),article=document.querySelector("main.home article"),signup_button.addEventListener("click",(e=>{"none"!==signup.display?(article.style.display="none",signup.style.display="flex"):(article.style.display="flex",signup.style.display="none")})),signup.addEventListener("submit",(e=>{e.preventDefault(),data=new FormData(signup),objectData={username:data.get("username"),email:data.get("email"),password:data.get("password"),recaptcha:data.get("g-recaptcha-response")},fetch(`${API_URL}/api/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(objectData)}).then((e=>{if(403==e.status)console.log("Incorrect captcha, or username and password."),captcha.hidden=!1;else if(401==e.status)console.log("Incorrect Username or Password"),captcha.hidden=!0;else{if(201==e.status)return e.json();console.log("something went wrong")}})).then((e=>{session_id=e.session_id,expiry_date=e.expiry_date,user_id=e.user_id,document.cookie=`session_id=${session_id}; Expires=${expiry_date} SameSite=Strict; Secure`,document.cookie=`user_id=${user_id}; Expires=${expiry_date} SameSite=Strict; Secure`,window.location.href="/monalect"}))}));